/*
Financial calc.
the app shd calc the emi for a given principal amt with certain rate of interest and term, ( the term shd be minimal of 3 years for car, 10 years for home loan)
the app shd also have calc for calculating rd amt and provide the final amt after the rd(recurring deposit) is complete
*/

//The mathematical formula to calculate EMI is: 
//EMI = P * r * (1 + r)n/ ((1 + r)n - 1) 
//where P= Loan amount, r= interest rate, n=tenure in number of months.

using System;
using System.Collections.Generic;
namespace SampleConApp
{
    class EmiCalc
    {
        public double PrincipalAmt { get; set; }
        public double RateofInt { get; set; }
        public double Term { get; set; }
        public string Emi { get; set; }

        public double EMICalculator()
        {
            switch(Emi)
            {
                case "car":
                    return ((PrincipalAmt * RateofInt * (Math.Pow((1 + RateofInt), (Term)))) / (Math.Pow((1 + RateofInt), (Term - 1))));

                case "home":
                    return ((PrincipalAmt * RateofInt * (Math.Pow((1 + RateofInt), (Term)))) / (Math.Pow((1 + RateofInt), (Term - 1))));

                default:
                    throw new Exception("Invalid choice");
            }
        }
    }

    class Ex07FinancialCalc
    {
        static double EMICalculator(double princiAmt, double rateOfInterest, double term, string emi)
        {
            EmiCalc loan=new EmiCalc();
            loan.PrincipalAmt=princiAmt;
            loan.RateofInt=rateOfInterest;
            loan.Term=term;
            loan.Emi=emi;
            return loan.EMICalculator();
        }
        static void Main(string[] args)
        {
            string stopSignal="";
            System.Console.WriteLine("Welcome to EMI Calculator for car and home loan");
            do
            {
                var emi= MyConsole.GetString("Enter the type of loan you want to calculate EMI for : car or home");

                var princiAmt= MyConsole.GetDouble("Enter the principal amount of your loan");
                var rateOfInterest= MyConsole.GetDouble("Enter the rate of interest of your loan");
                var term= MyConsole.GetDouble("Enter the tenure in the term of years of your loan");

                try
                {
                    double result= EMICalculator(princiAmt, rateOfInterest, term, emi);
                    System.Console.WriteLine("The EMI of your {0} loan is {1}", emi, result);
                    stopSignal= MyConsole.GetString("Do you want to continue the operations? If yes press Y, and if no press N");
                }
                catch (Exception ex)
                {
                    System.Console.WriteLine(ex.Message);
                }   
            }while(stopSignal.ToUpper()=="Y");
        }    
    }
}

